<div class="page-header">
  <% if user_signed_in? and current_user.is_admin? %>
    <%= link_to new_membership_path, :class => 'btn btn-primary' do %>
      <span class="glyphicon glyphicon-plus"></span>
      New Membership
    <% end %>
  <% end %>
  <h1>Listing memberships</h1>
</div>

<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th>User</th>
        <th>Valid from</th>
        <th>Duration</th>
        <% if user_signed_in? and current_user.is_admin? %><th class="admin-column">Admin</th><% end %>
      </tr>
    </thead>

    <tbody>
      <%= content_tag_for(:tr, @memberships) do |membership| %>
        <td><%= membership.user.username %> (<%= membership.user_id %>)</td>
        <td><%= membership.valid_from.strftime("%d %B, %Y") %></td>
        <td><%= membership.duration %></td>
        <% if user_signed_in? and current_user.is_admin? %>
          <td class="admin-column">
            <div class="btn-group">
              <%= link_to 'Show', membership, :class => 'btn btn-default btn-sm' %> 
              <%= link_to 'Edit', edit_membership_path(membership), :class => 'btn btn-warning btn-sm' %> 
              <%= link_to 'Destroy', membership, :class => 'btn btn-danger btn-sm', method: :delete, data: { confirm: 'Are you sure?' } %>
            </div>
          </td>
        <% end %>
      <% end %>
    </tbody>
  </table>
</div>
